(function(e){function t(t){for(var n,i,o=t[0],c=t[1],u=t[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=s[0]))}return e}var n={},a={app:0},r=[];function i(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=n,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/chat/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0308":function(e,t,s){"use strict";var n=s("dae1"),a=s.n(n);a.a},"38e6":function(e,t,s){},"3b84":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var n=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("transition",{attrs:{name:"slide-down",appear:""}},[s("chat-window",{attrs:{user:e.user,buddy:e.buddy}})],1),s("transition",{attrs:{name:"slide-down",appear:""}},[s("chat-window",{attrs:{user:e.buddy,buddy:e.user}})],1)],1)},r=[],i=(s("96cf"),s("3b8d")),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat"},[s("chat-header",{attrs:{buddy:e.buddy}}),s("div",{ref:"body",staticClass:"body",class:{"is-empty":0==e.messages.length}},[0==e.messages.length?s("div",{staticClass:"no-messages"},[s("div",[e._v("Oh, Don't be shy")]),s("button",{staticClass:"button",attrs:{disabled:null===e.user},on:{click:e.sayHi}},[e._v("\n                  Say hi with style\n              ")])]):[s("transition-group",{attrs:{name:"slide-down",tag:"div"}},e._l(e.messages,function(t,n){return s("message",{key:"m"+n,attrs:{message:t,user:e.user},on:{reply:e.replyMessage}})}),1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.activeUsers,expression:"activeUsers"}],staticClass:"is-typing"},[s("eva-icon",{attrs:{name:"message-circle"}}),e._v("\n                  "+e._s(e.activeUsers)+" is typing...\n              ")],1)]],2),s("new-messages-alert",{attrs:{show:e.newMessages},on:{click:e.scrollToBottom}}),s("reply",{attrs:{show:e.showReply,message:e.repliedMessage},on:{close:function(t){e.showReply=!1}}}),s("div",{staticClass:"footer bg-special"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],ref:"messageInput",attrs:{type:"text",placeholder:"Write a message...",disabled:null===e.user},domProps:{value:e.message},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.newMessage(e.message)},input:function(t){t.target.composing||(e.message=t.target.value)}}}),s("div",{staticClass:"button send",attrs:{disabled:null===e.user},on:{click:function(t){return e.newMessage(e.message)}}},[s("eva-icon",{attrs:{name:"arrow-forward",animation:"pulse",fill:"white"}})],1)])],1)},c=[],u=(s("7f7f"),s("436a")),l=s("bc3a"),d=s.n(l),f=s("84a1"),m=s.n(f);function p(){return h.apply(this,arguments)}function h(){return h=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("https://randomuser.me/api/?results=2&nat=us,es,fr,gb");case 2:return t=e.sent,s=t.data,e.abrupt("return",s.results);case 5:case"end":return e.stop()}},e)})),h.apply(this,arguments)}function g(){var e=["39 is the number of books in the Old Testament according to Protestant canon","7e+27 is the number of atoms in the average human body","400 is the number of years in a period of the Gregorian calendar, of which 97 are leap years and 303 are common","141 is the number of participants (90 Indians and 51 Pilgrims) at the First Thanksgiving","235 is the atomic mass number of an important isotope of the element uranium, the fissile isotope which is used as the fuel for nuclear reactors and in some nuclear weapons","304 is the record number of wickets taken in English cricket season by Tich Freeman in 1928",'137 is the California Penal Code for "Offer bribe to influence testimony"'];return m()(e)}var v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"bg-special"},[e.buddy?s("avatar",{attrs:{src:e.buddy.picture.thumbnail}}):e._e(),s("div",{staticClass:"title"},[e._v(e._s(e.buddyTitle))])],1)},b=[],y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"avatar"},[s("img",{attrs:{src:e.src}})])},w=[],_={props:{src:{type:String,required:!0}}},O=_,x=(s("0308"),s("2877")),M=Object(x["a"])(O,y,w,!1,null,"7c0484f5",null),j=M.exports,k={props:{buddy:{type:Object,default:null}},components:{Avatar:j},computed:{buddyTitle:function(){return null===this.buddy?"Loading...":"".concat(this.buddy.name.first," ").concat(this.buddy.name.last)}}},$=k,C=(s("babc"),Object(x["a"])($,v,b,!1,null,null,null)),T=C.exports,N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"scale"}},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"button circle new-messages",attrs:{title:"You have new messages!"},on:{click:function(t){return e.$emit("click")}}},[s("eva-icon",{attrs:{name:"message-circle",animation:"pulse",fill:"white"}})],1)])},U=[],P={props:{show:{type:Boolean,default:!1}}},R=P,B=Object(x["a"])(R,N,U,!1,null,null,null),A=B.exports,E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message",class:{mine:e.message.user.login.username===e.user.login.username}},[s("avatar",{attrs:{src:e.message.user.picture.thumbnail}}),s("div",{staticClass:"right"},[e.message.reply?s("reply",{attrs:{show:!0,message:e.message.reply,"in-message":""}}):e._e(),s("div",{staticClass:"top"},[s("div",{staticClass:"username"},[e._v(e._s(e.message.user.name.first))]),s("div",{staticClass:"date"},[e._v(e._s(e._f("timeAgo")(e.message.date)))]),s("div",{staticClass:"reply-btn button button-icon",attrs:{title:"Reply this message!"},on:{click:function(t){return e.$emit("reply",e.message)}}},[s("eva-icon",{attrs:{height:"18",name:"undo"}})],1)]),e._l(e.message.text,function(t,n){return s("div",{key:n},[e._v(e._s(t))])})],2)],1)},H=[],S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"slide-down"}},[e.show?s("div",{staticClass:"reply",class:{"in-message":e.inMessage}},[s("div",{staticClass:"reply-header"},[s("strong",[e._v(e._s(e.message.user.name.first)+" said:")]),e.inMessage?e._e():s("div",{staticClass:"button button-icon",on:{click:function(t){return e.$emit("close")}}},[s("eva-icon",{attrs:{name:"close-outline",height:"18",fill:"white"}})],1)]),s("div",{staticClass:"reply-content"},e._l(e.message.text,function(t,n){return s("div",{key:n},[e._v(e._s(t))])}),0)]):e._e()])},q=[],D={props:{message:{required:!0},inMessage:{type:Boolean,default:!1},show:{type:Boolean,default:!1}}},I=D,F=(s("f1ce"),Object(x["a"])(I,S,q,!1,null,null,null)),J=F.exports,W={props:{message:{type:Object,required:!0},user:{type:Object,required:!0}},components:{Avatar:j,Reply:J},filters:{timeAgo:function(e){return Object(u["a"])(e,new Date)}}},G=W,L=(s("f87e"),Object(x["a"])(G,E,H,!1,null,null,null)),Y=L.exports,z={components:{ChatHeader:T,NewMessagesAlert:A,Message:Y,Reply:J},props:{user:{type:Object,default:null},buddy:{type:Object,default:null}},created:function(){this.$root.$on("new-message",this.incomingMessagesHandler)},data:function(){return{message:"",newMessages:!1,showReply:!1,repliedMessage:null}},watch:{message:function(e){e.length>0?this.$store.commit("setActiveUser",this.user.name.first):this.$store.commit("removeActiveUser",this.user.name.first)},activeUsers:function(e){e.length>0&&this.isBottom()&&this.scrollToBottom()}},methods:{scrollToBottom:function(){var e=this;this.$nextTick(function(){var t=e.$refs.body;t.scrollTop=t.scrollHeight,e.newMessages=!1})},isBottom:function(){var e=this.$refs.body;return e.scrollHeight-e.scrollTop===e.clientHeight},incomingMessagesHandler:function(e){var t=e.user,s=e.text,n=e.date;e.reply;this.allowNotifications&&t.login.username!==this.user.login.username&&new Notification("".concat(t.name.first," (").concat(Object(u["a"])(n,new Date),")"),{icon:t.picture.large,body:s[0]}),t.login.username===this.user.login.username||this.isBottom()?this.scrollToBottom():this.newMessages=!0},newMessage:function(e){if(""!==e){var t={user:this.user,text:[e],date:new Date,reply:this.repliedMessage};this.$store.commit("newMessage",t),this.$root.$emit("new-message",t),this.showReply=!1,this.repliedMessage=null,this.message="",this.scrollToBottom()}},sayHi:function(){this.newMessage("Hey there! Did you know?"),this.newMessage("".concat(g(),"?"))},replyMessage:function(e){this.showReply=!0,this.repliedMessage=e,this.$refs.messageInput.focus()}},computed:{activeUsers:function(){var e=this;return this.$store.state.activeUsers.filter(function(t){return t!==e.user.name.first}).join(", ")},messages:function(){return this.$store.state.messages},allowNotifications:function(){return this.$store.state.allowNotifications}}},K=z,Q=(s("74b7"),Object(x["a"])(K,o,c,!1,null,null,null)),V=Q.exports,X={name:"App",components:{ChatWindow:V},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return"Notification"in window&&"granted"!==Notification.permission&&Notification.requestPermission(function(e){"granted"===e&&s.$store.commit("allowNotifications")}),e.next=3,p();case 3:t=e.sent,this.user=t[0],this.buddy=t[1];case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{user:null,buddy:null}}},Z=X,ee=Object(x["a"])(Z,a,r,!1,null,null,null),te=ee.exports,se=(s("6762"),s("2fdb"),s("2f62")),ne=s("b3ec");n["a"].use(se["a"]);var ae=new se["a"].Store({state:{messages:[],activeUsers:[],allowNotifications:!1},mutations:{newMessage:function(e,t){if(e.messages.length>0){var s=e.messages[e.messages.length-1];if(s.user.login.username===t.user.login.username&&Object(ne["a"])(s.date,t.date)&&null===t.reply)return s.text.push(t.text[0])}e.messages.push(t)},setActiveUser:function(e,t){e.activeUsers.includes(t)||e.activeUsers.push(t)},removeActiveUser:function(e,t){var s=e.activeUsers.indexOf(t);e.activeUsers.splice(s,1)},allowNotifications:function(e){e.allowNotifications=!0}}}),re=(s("a589"),s("0665")),ie=s.n(re);n["a"].use(ie.a),n["a"].config.productionTip=!1,n["a"].prototype.$http=d.a,new n["a"]({render:function(e){return e(te)},store:ae}).$mount("#app")},"69d0":function(e,t,s){},"74b7":function(e,t,s){"use strict";var n=s("3b84"),a=s.n(n);a.a},"9e3c":function(e,t,s){},a589:function(e,t,s){},babc:function(e,t,s){"use strict";var n=s("69d0"),a=s.n(n);a.a},dae1:function(e,t,s){},f1ce:function(e,t,s){"use strict";var n=s("38e6"),a=s.n(n);a.a},f87e:function(e,t,s){"use strict";var n=s("9e3c"),a=s.n(n);a.a}});
//# sourceMappingURL=app.7d43da02.js.map